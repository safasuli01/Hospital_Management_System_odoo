<odoo>
  <record id="patient_print" model="ir.actions.report">
    <field name="name">Patient Print</field>
    <field name="model">hms.patient</field>
    <field name="report_type">qweb-html</field>
    <field name="report_name">hms_app.patient_report</field>
    <field name="report_file">hms_app.patient_report</field>
    <field name="binding_model_id" ref="hms_app.model_hms_patient"/>
    <field name="binding_type">report</field>
    <field name="print_report_name">'Patient - %s' % (object.f_name)</field>
  </record>

  <template id="patient_report">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="doc">
        <t t-call="web.basic_layout">
          <div class="page">
            <div class="row">
              <div class="col-12">
                <h1 class="text-center text-danger">Patient Status Report</h1>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-md-6">
                <div class="mb-2">
                  <strong>Name:</strong>
                  <span t-esc="doc.f_name"/> <span t-esc="doc.l_name"/>
                </div>
                <div class="mb-2">
                  <strong>Age:</strong>
                  <span t-esc="doc.age"/>
                </div>
                <div class="mb-2">
                  <strong>Department:</strong>
                  <span t-esc="doc.dept_id.name"/>
                </div>
                <div class="mb-2">
                  <strong>Doctors:</strong>
                  <span t-foreach="doc.doctor_ids" t-as="doctor">
                    <span t-esc="doctor.name"/>
                  </span>
                </div>
              </div>

              <div class="col-md-6 text-right">
                <img t-if="doc.image" t-att-src="'data:image/png;base64,%s' % doc.image" class="img-thumbnail mb-2" style="width:150px; height:150px;" alt="Patient Image"/>
                <div class="mb-2">
                  <strong>Birth date:</strong>
                  <span t-esc="doc.b_date"/>
                </div>
                <div class="mb-2">
                  <strong>PCR:</strong>
                  <span t-esc="doc.pcr"/>
                </div>
                <div class="mb-2">
                  <strong>Blood Type:</strong>
                  <span t-esc="doc.blood_type"/>
                </div>
                <div class="mb-2">
                  <strong>Email:</strong>
                  <span t-esc="doc.email"/>
                </div>
              </div>
            </div>

            <div class="row mt-3">
              <div class="col-12">
                <h2 class="text-center text-danger">Log History</h2>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-12">
                <table class="table table-bordered">
                  <thead class="thead-light">
                    <tr>
                      <th>User</th>
                      <th>Date</th>
                      <th>Info</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr t-foreach="doc.log_history_ids" t-as="history">
                      <td><span t-esc="history.create_uid.name"/></td>
                      <td><span t-esc="history.create_date"/></td>
                      <td><span t-esc="history.description"/></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </t>
      </t>
    </t>
  </template>
</odoo>
